<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Catalog</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
            crossorigin="anonymous"></script>
    <th:block th:insert="styles :: styles"></th:block>
</head>
<body>

<th:block th:insert="blocks/header :: header"></th:block>

<main>
    <section class="pt-4 pt-lg-5">
        <div class="container position-relative">
            <div class="row">
                <div class="col-12">
                    <h1 class="fs-2" th:text="${tour.title}"></h1>
                </div>
                <div class="col-12">
                    <img th:src="@{/image/tour/{id} (id=${tour.id})}" class="rounded col-9" style="">
                </div>
            </div>
        </div>
    </section>


    <section class="pt-4 pt-md-5">
        <div class="container">
            <div class="row g-4 g-md-5">
                <div class="col-xl-8">
                    <div class="tab-content mb-0" id="tour-pills-tabContent">

                        <div class="tab-pane fade active show" id="tour-pills-tab1" role="tabpanel"
                             aria-labelledby="tour-pills-tab-1">
                            <div class="card bg-transparent p-0">

                                <div class="card-header bg-transparent border-bottom p-0 pb-3">
                                    <h3 class="mb-0 ms-2">Опис</h3>
                                </div>

                                <div class="card-body p-0 pt-3">
                                    <p class="mb-4 ms-2" th:text="${tour.getDescription()}"></p>

                                    <h5 class="ms-2">Інформація про тур</h5>
                                    <h6 class="ms-2">Інформація про готель</h6>
                                    <ul class="list-group list-group-borderless mb-4">
                                        <li class="list-group-item">
                                            <span class="h6 mb-0 me-1">Назва:</span>
                                            <span class="h6 fw-light mb-0"
                                                  th:text="${tour.getHotel().getHotelName()}">  </span>
                                        </li>
                                        <li class="list-group-item">
                                            <span class="h6 mb-0 me-1">Клас:</span>
                                            <span class="h6 fw-light mb-0"
                                                  th:text="${tour.getHotel().getHotelClass().getHotelClassName()}"></span>
                                        </li>
                                        <li class="list-group-item">
                                            <span class="h6 mb-0 me-1">Адреса:</span>
                                            <span class="h6 fw-light mb-0"
                                                  th:text="${tour.getHotel().getHotelLocation()}"></span>
                                        </li>
                                        <li class="list-group-item">
                                            <span class="h6 mb-0 me-1">Особлива пропозиція:</span>

                                        </li>
                                        <li class="list-group-item"
                                            th:each="feature : ${tour.getHotel().getFeatures()}">
                                            <span class="h6 mb-0 ms-4" th:text="'Назва: '"></span>
                                            <span class="h6 fw-light" th:text="${feature.getFeaturesName()}"></span>
                                            <span class="h6 mb-0" th:text="' Порода коней: '"></span>
                                            <span class="h6 fw-light" th:text="${feature.getFeaturesName()}"></span>
                                        </li>
                                    </ul>

                                    <br>

                                    <h6 class="ms-2">Інформація про автобус</h6>
                                    <ul class="list-group list-group-borderless mb-4">
                                        <li class="list-group-item">
                                            <span class="h6 mb-0 me-1">Автобусна компанія:</span>
                                            <span class="h6 fw-light mb-0"
                                                  th:text="${tour.getBusFirmName()}">  </span>
                                        </li>
                                        <li class="list-group-item">
                                            <span class="h6 mb-0 me-1">Тип автобусу:</span>
                                            <span class="h6 fw-light mb-0"
                                                  th:text="${tour.getBusTypeName()}"></span>
                                        </li>
                                        <li class="list-group-item">
                                            <span class="h6 mb-0 me-1">Кількість місць:</span>
                                            <span class="h6 fw-light mb-0"
                                                  th:text="${tour.getBusTypeSeatCount()}"></span>
                                        </li>
                                    </ul>

                                    <br>

                                    <h6 class="ms-2">Розклад</h6>
                                    <div th:each="data : ${tour.getTimetable()}">
                                        <ul class="list-group list-group-borderless mb-4">
                                            <li class="list-group-item">
                                                <span class="h6 mb-0 me-1">Дата виїзду:</span>
                                                <span class="h6 fw-light mb-0"
                                                      th:text="${data.getDepartureDate()}">  </span>
                                            </li>
                                            <li class="list-group-item">
                                                <span class="h6 mb-0 me-1">Дата прибуття у готель:</span>
                                                <span class="h6 fw-light mb-0"
                                                      th:text="${data.getDateArrivalAtHotel()}"></span>
                                            </li>
                                            <li class="list-group-item">
                                                <span class="h6 mb-0 me-1">Дата виїзду з готелю:</span>
                                                <span class="h6 fw-light mb-0"
                                                      th:text="${data.getDateCheckoutFromHotel()}"></span>
                                            </li>
                                            <li class="list-group-item">
                                                <span class="h6 mb-0 me-1">Дата приїзду:</span>
                                                <span class="h6 fw-light mb-0"
                                                      th:text="${data.getArrivalDate()}"></span>
                                            </li>
                                        </ul>
                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>
                </div>


                <aside class="col-xl-4">
                    <div class="row g-4">

                        <div class="col-md-6 col-xl-12">
                            <div class="card card-body border bg-transparent">


                                <form th:action="@{/user/pre-select-option/{id} (id=${tour.id})}" method="post">
                                    <div class="btn-group">
                                        <div th:each="room : ${tour.getHotel().getRooms()}" th:object="${tourRequest}">
                                            <input type="radio" class="btn-check" th:id="room-checkbox + ${room.getNumberOfPeople()}" name="room-checkbox"
                                                   th:value="${room.getNumberOfPeople()}"
                                                   th:field="*{countOfPeople}" required>
                                            <label th:for="room-checkbox + ${room.getNumberOfPeople()}" class="btn btn-outline-primary"
                                                   th:text="'Кількістю місць: ' + ${room.getNumberOfPeople()}"></label>
                                        </div>
                                    </div>
                                    <div class="hstack gap-2 mb-1">
                                        <h3 class="card-title mb-0" th:text="${tour.getCost()}"></h3>
                                    </div>
                                    <div th:if="${#authorization.expression('hasRole(''ROLE_USER'')')}"
                                         class="d-grid gap-2">
                                        <button type="submit" th:href="@{/user/pre-select-option/{id} (id=${tour.id})}"
                                           class="btn btn-primary">Забронювати</button>
                                    </div>
                                </form>



                            </div>
                        </div>
                    </div>
                </aside>

            </div>
        </div>
    </section>
</main>

<th:block th:insert="blocks/footer :: footer"></th:block>

</body>
</html>